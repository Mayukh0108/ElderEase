<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emergency Contacts Pro</title>
    <style>
        :root {
            --primary-light: #2563eb;
            --primary-hover-light: #1d4ed8;
            --secondary-light: #4f46e5;
            --danger-light: #dc2626;
            --success-light: #16a34a;
            --warning-light: #eab308;
            --background-light: #f0f9ff;
            --card-bg-light: #ffffff;
            --text-primary-light: #1e293b;
            --text-secondary-light: #475569;
            --border-light: #e2e8f0;
            --input-bg-light: #ffffff;
            --hover-light: #f1f5f9;
            
            /* Dark Theme Colors */
            --primary-dark: #3b82f6;
            --primary-hover-dark: #60a5fa;
            --secondary-dark: #6366f1;
            --danger-dark: #ef4444;
            --success-dark: #22c55e;
            --warning-dark: #facc15;
            --background-dark: #0f172a;
            --card-bg-dark: #1e293b;
            --text-primary-dark: #f8fafc;
            --text-secondary-dark: #cbd5e1;
            --border-dark: #334155;
            --input-bg-dark: #1e293b;
            --hover-dark: #334155;

            /* Common Variables */
            --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            color: var(--text-dark);
            transition: var(--transition);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }


        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%234f46e5' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E") repeat;
            opacity: 0.5;
            z-index: -1;
        }

        body.dark-mode {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: var(--text-light);
        }

        body.dark-mode::before {
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%236366f1' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E") repeat;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem;
            position: relative;
        }

        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100vw;
            height: 100%;
            background: radial-gradient(circle at top right, rgba(79, 70, 229, 0.1) 0%, transparent 70%),
                        radial-gradient(circle at bottom left, rgba(37, 99, 235, 0.1) 0%, transparent 70%);
            z-index: -1;
        }

        .dark-mode .container::before {
            background: radial-gradient(circle at top right, rgba(99, 102, 241, 0.15) 0%, transparent 70%),
                        radial-gradient(circle at bottom left, rgba(59, 130, 246, 0.15) 0%, transparent 70%);
        }

        body.dark-mode {
            background-color: var(--dark-bg);
            color: var(--text-light);
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            background: linear-gradient(135deg, var(--primary-light), var(--secondary-light));
            padding: 2rem;
            border-radius: 16px;
            box-shadow: var(--shadow-lg);
            margin-bottom: 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .dark-mode .header {
            background: linear-gradient(135deg, var(--primary-dark), var(--secondary-dark));
        }

        .header-actions {
            display: flex;
            gap: 1rem;
        }

        .page-title {
            color: #ffffff;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .theme-toggle, .language-btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            background: rgba(255, 255, 255, 0.2);
            color: #ffffff;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .theme-toggle:hover, .language-btn:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
        }

        .page-title {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin: 0;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .emergency-button {
            width: 100%;
            padding: 1.5rem;
            font-size: 1.8rem;
            font-weight: bold;
            background: var(--danger-color);
            color: var(--text-light);
            border: none;
            border-radius: 12px;
            margin-bottom: 2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .emergency-button:hover {
            transform: translateY(-2px);
            background: #dc2626;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
        }

        .search-bar {
            width: 100%;
            padding: 1rem;
            font-size: 1.2rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            margin-bottom: 2rem;
            transition: var(--transition);
            background: var(--card-light);
            color: var(--text-dark);
        }

        .dark-mode .search-bar {
            background: var(--card-dark);
            color: var(--text-light);
            border-color: #475569;
        }

        .search-bar:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        }

        .controls {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .add-contact-btn {
            padding: 1rem 2rem;
            font-size: 1.1rem;
            font-weight: 600;
            background: var(--success-color);
            color: var(--text-light);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .add-contact-btn:hover {
            transform: translateY(-2px);
            background: #16a34a;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--card-light);
            padding: 2rem;
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            position: relative;
        }

        .dark-mode .modal-content {
            background: var(--card-dark);
        }

        .close-modal {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-dark);
        }

        .dark-mode .close-modal {
            color: var(--text-light);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 0.75rem;
            font-size: 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            transition: var(--transition);
        }

        .dark-mode .form-group input, .dark-mode .form-group select {
            background: var(--card-dark);
            color: var(--text-light);
            border-color: #475569;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        }

        .contacts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .contact-card {
            background: var(--card-light);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: var(--shadow);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .dark-mode .contact-card {
            background: var(--card-dark);
        }

        .contact-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        }

        .priority-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 600;
        }

        .priority-high {
            background: var(--danger-color);
            color: var(--text-light);
        }

        .priority-medium {
            background: var(--warning-color);
            color: var(--text-dark);
        }

        .priority-low {
            background: var(--success-color);
            color: var(--text-light);
        }

        .contact-info h3 {
            font-size: 1.25rem;
            margin-bottom: 0.5rem;
        }

        .contact-detail {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
            color: #64748b;
        }

        .dark-mode .contact-detail {
            color: #94a3b8;
        }

        .contact-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .action-btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .call-btn {
            background: var(--success-color);
            color: var(--text-light);
        }

        .edit-btn {
            background: var(--primary-color);
            color: var(--text-light);
        }

        .delete-btn {
            background: var(--danger-color);
            color: var(--text-light);
        }

        .action-btn:hover {
            transform: translateY(-2px);
            filter: brightness(110%);
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .page-title {
                font-size: 2rem;
            }

            .contacts-grid {
                grid-template-columns: 1fr;
            }

            .header {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .header-actions {
                width: 100%;
                justify-content: center;
            }
        }

        .emergency-button {
            background: linear-gradient(135deg, var(--danger-light), #ef4444);
            color: #ffffff;
            padding: 1.5rem;
            border-radius: 16px;
            border: none;
            font-size: 1.8rem;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-lg);
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
        }

        .dark-mode .emergency-button {
            background: linear-gradient(135deg, var(--danger-dark), #b91c1c);
        }

        .emergency-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 30px rgba(239, 68, 68, 0.2);
        }

        .search-bar {
            width: 100%;
            padding: 1rem 1.5rem;
            font-size: 1.1rem;
            border: 2px solid var(--border-light);
            border-radius: 12px;
            background: var(--input-bg-light);
            color: var(--text-primary-light);
            transition: var(--transition);
            margin-bottom: 2rem;
        }

        .dark-mode .search-bar {
            background: var(--input-bg-dark);
            border-color: var(--border-dark);
            color: var(--text-primary-dark);
        }

        .search-bar:focus {
            outline: none;
            border-color: var(--primary-light);
            box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1);
        }

        .dark-mode .search-bar:focus {
            border-color: var(--primary-dark);
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.2);
        }

        .contact-card {
            background: var(--card-bg-light);
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: var(--shadow-md);
            transition: var(--transition);
            border: 1px solid var(--border-light);
        }

        .dark-mode .contact-card {
            background: var(--card-bg-dark);
            border-color: var(--border-dark);
        }

        .contact-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-light);
        }

        .dark-mode .contact-card:hover {
            border-color: var(--primary-dark);
        }

        .priority-badge {
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.875rem;
        }

        .priority-high {
            background: linear-gradient(135deg, var(--danger-light), #ef4444);
            color: #ffffff;
        }

        .priority-medium {
            background: linear-gradient(135deg, var(--warning-light), #f59e0b);
            color: #1e293b;
        }

        .priority-low {
            background: linear-gradient(135deg, var(--success-light), #15803d);
            color: #ffffff;
        }

        .dark-mode .priority-high {
            background: linear-gradient(135deg, var(--danger-dark), #dc2626);
        }

        .dark-mode .priority-medium {
            background: linear-gradient(135deg, var(--warning-dark), #eab308);
        }

        .dark-mode .priority-low {
            background: linear-gradient(135deg, var(--success-dark), #16a34a);
        }

        .contact-info h3 {
            color: var(--text-primary-light);
            font-size: 1.25rem;
            margin-bottom: 1rem;
        }

        .dark-mode .contact-info h3 {
            color: var(--text-primary-dark);
        }

        .contact-detail {
            color: var(--text-secondary-light);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .dark-mode .contact-detail {
            color: var(--text-secondary-dark);
        }

        .action-btn {
            padding: 0.75rem 1.25rem;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .call-btn {
            background: linear-gradient(135deg, var(--success-light), #15803d);
            color: #ffffff;
        }

        .edit-btn {
            background: linear-gradient(135deg, var(--primary-light), #1d4ed8);
            color: #ffffff;
        }

        .delete-btn {
            background: linear-gradient(135deg, var(--danger-light), #b91c1c);
            color: #ffffff;
        }

        .dark-mode .call-btn {
            background: linear-gradient(135deg, var(--success-dark), #16a34a);
        }

        .dark-mode .edit-btn {
            background: linear-gradient(135deg, var(--primary-dark), #2563eb);
        }

        .dark-mode .delete-btn {
            background: linear-gradient(135deg, var(--danger-dark), #dc2626);
        }

        .modal-content {
            background: var(--card-bg-light);
            border-radius: 16px;
            padding: 2rem;
            border: 1px solid var(--border-light);
        }

        .dark-mode .modal-content {
            background: var(--card-bg-dark);
            border-color: var(--border-dark);
        }

        .form-group input,
        .form-group select {
            background: var(--input-bg-light);
            border: 2px solid var(--border-light);
            color: var(--text-primary-light);
            border-radius: 10px;
            padding: 0.75rem 1rem;
        }

        .dark-mode .form-group input,
        .dark-mode .form-group select {
            background: var(--input-bg-dark);
            border-color: var(--border-dark);
            color: var(--text-primary-dark);
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1 class="page-title">üö® Emergency Contacts Pro</h1>
            <div class="header-actions">
                <button class="theme-toggle" onclick="toggleTheme()">üåô Dark Mode</button>
                <button class="language-btn" onclick="toggleLanguage()">‡§π‡§ø‡§Ç‡§¶‡•Ä</button>
            </div>
        </header>

        <button class="emergency-button" onclick="triggerEmergency()">
            ‚ö†Ô∏è EMERGENCY SOS
        </button>

        <div class="controls">
            <input type="text" class="search-bar" id="searchBar" placeholder="Search contacts by name, number, or relation...">
            <button class="add-contact-btn" onclick="showAddContactModal()">
                ‚ûï Add Contact
            </button>
        </div>

        <div class="contacts-grid" id="contactsGrid"></div>
            <!-- Contacts will be added here dynamically -->
        </div>
    </div>

    <!-- Add/Edit Contact Modal -->
    <div class="modal" id="contactModal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal()">√ó</button>
            <h2 id="modalTitle">Add New Contact</h2>
            <form id="contactForm" onsubmit="handleContactSubmit(event)">
                <div class="form-group">
                    <label for="contactName">Name</label>
                    <input type="text" id="contactName" required>
                </div>
                <div class="form-group">
                    <label for="contactPhone">Phone Number</label>
                    <input type="tel" id="contactPhone" required>
                </div>
                <div class="form-group">
                    <label for="contactRelation">Relationship</label>
                    <input type="text" id="contactRelation" required>
                </div>
                <div class="form-group">
                    <label for="contactPriority">Priority</label>
                    <select id="contactPriority" required>
                        <option value="high">High Priority</option>
                        <option value="medium">Medium Priority</option>
                        <option value="low">Low Priority</option>
                    </select>
                </div>
                <button type="submit" class="add-contact-btn">Save Contact</button>
            </form>
        </div>
    </div>

    <script>
        // Initial contacts data
        let contacts = JSON.parse(localStorage.getItem('contacts')) || [
            { id: 1, name: 'Dr. Sarah Smith', phone: '1234567890', relation: 'Primary Doctor', priority: 'high' },
            { id: 2, name: 'John Wilson', phone: '9876543210', relation: 'Son', priority: 'medium' },
            { id: 3, name: 'Mary Johnson', phone: '5555555555', relation: 'Caregiver', priority: 'high' }
        ];

        let currentEditId = null;
        let isEnglish = true;

        // Theme toggle
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            const themeBtn = document.querySelector('.theme-toggle');
            if (document.body.classList.contains('dark-mode')) {
                themeBtn.innerHTML = '‚òÄÔ∏è Light Mode';
            } else {
                themeBtn.innerHTML = 'üåô Dark Mode';
            }
        }

        // Language translations
        const translations = {
            english: {
                title: 'üö® Emergency Contacts Pro',
                emergency: '‚ö†Ô∏è EMERGENCY SOS',
                search: 'Search contacts by name, number, or relation...',
                addContact: '‚ûï Add Contact',
                name: 'Name',
                phone: 'Phone Number',
                relation: 'Relationship',
                priority: 'Priority',
                save: 'Save Contact',
                call: 'Call',
                edit: 'Edit',
                delete: 'Delete',
                high: 'High Priority',
                medium: 'Medium Priority',
                low: 'Low Priority'
            },
            hindi: {
                title: 'üö® ‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§™‡•ç‡§∞‡•ã',
                emergency: '‚ö†Ô∏è ‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® SOS',
                search: '‡§®‡§æ‡§Æ, ‡§®‡§Ç‡§¨‡§∞ ‡§Ø‡§æ ‡§∏‡§Ç‡§¨‡§Ç‡§ß ‡§∏‡•á ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ñ‡•ã‡§ú‡•á‡§Ç...',
                addContact: '‚ûï ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ú‡•ã‡§°‡§º‡•á‡§Ç',
                name: '‡§®‡§æ‡§Æ',
                phone: '‡§´‡§º‡•ã‡§® ‡§®‡§Ç‡§¨‡§∞',
                relation: '‡§∞‡§ø‡§∂‡•ç‡§§‡§æ',
                priority: '‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï‡§§‡§æ',
                save: '‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§∏‡§π‡•á‡§ú‡•á‡§Ç',
                call: '‡§ï‡•â‡§≤',
                edit: '‡§∏‡§Ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç',
                delete: '‡§π‡§ü‡§æ‡§è‡§Ç',
                high: '‡§â‡§ö‡•ç‡§ö ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï‡§§‡§æ',
                medium: '‡§Æ‡§ß‡•ç‡§Ø‡§Æ ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï‡§§‡§æ',
                low: '‡§®‡§ø‡§Æ‡•ç‡§® ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï‡§§‡§æ'
            }
        };

        // Language toggle functionality
        function toggleLanguage() {
            isEnglish = !isEnglish;
            const lang = isEnglish ? 'english' : 'hindi';
            document.querySelector('.language-btn').textContent = isEnglish ? '‡§π‡§ø‡§Ç‡§¶‡•Ä' : 'English';
            
            // Update all translatable elements
            document.querySelector('.page-title').textContent = translations[lang].title;
            document.querySelector('.emergency-button').textContent = translations[lang].emergency;
            document.querySelector('.search-bar').placeholder = translations[lang].search;
            document.querySelector('.add-contact-btn').textContent = translations[lang].addContact;
            
            // Update form labels
            document.querySelector('label[for="contactName"]').textContent = translations[lang].name;
            document.querySelector('label[for="contactPhone"]').textContent = translations[lang].phone;
            document.querySelector('label[for="contactRelation"]').textContent = translations[lang].relation;
            document.querySelector('label[for="contactPriority"]').textContent = translations[lang].priority;
            
            // Update priority options
            const prioritySelect = document.getElementById('contactPriority');
            prioritySelect.options[0].text = translations[lang].high;
            prioritySelect.options[1].text = translations[lang].medium;
            prioritySelect.options[2].text = translations[lang].low;
            
            // Refresh contacts display
            renderContacts();
        }

        // Modal functionality
        function showAddContactModal() {
            document.getElementById('modalTitle').textContent = isEnglish ? 'Add New Contact' : '‡§®‡§Ø‡§æ ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ú‡•ã‡§°‡§º‡•á‡§Ç';
            document.getElementById('contactForm').reset();
            currentEditId = null;
            document.getElementById('contactModal').classList.add('active');
        }

        function showEditContactModal(contact) {
            document.getElementById('modalTitle').textContent = isEnglish ? 'Edit Contact' : '‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§∏‡§Ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç';
            document.getElementById('contactName').value = contact.name;
            document.getElementById('contactPhone').value = contact.phone;
            document.getElementById('contactRelation').value = contact.relation;
            document.getElementById('contactPriority').value = contact.priority;
            currentEditId = contact.id;
            document.getElementById('contactModal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('contactModal').classList.remove('active');
        }

        // Form submission handler
        function handleContactSubmit(event) {
            event.preventDefault();
            const contactData = {
                name: document.getElementById('contactName').value,
                phone: document.getElementById('contactPhone').value,
                relation: document.getElementById('contactRelation').value,
                priority: document.getElementById('contactPriority').value,
                id: currentEditId || Date.now()
            };

            if (currentEditId) {
                const index = contacts.findIndex(c => c.id === currentEditId);
                contacts[index] = contactData;
            } else {
                contacts.push(contactData);
            }

            localStorage.setItem('contacts', JSON.stringify(contacts));
            renderContacts();
            closeModal();
        }

        // Emergency functionality
        function triggerEmergency() {
            const highPriorityContacts = contacts.filter(c => c.priority === 'high');
            let message = isEnglish ? 'Emergency alert sent to high priority contacts:\n' : '‡§â‡§ö‡•ç‡§ö ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï‡§§‡§æ ‡§µ‡§æ‡§≤‡•á ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï‡•ã‡§Ç ‡§ï‡•ã ‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§Ö‡§≤‡§∞‡•ç‡§ü ‡§≠‡•á‡§ú‡§æ ‡§ó‡§Ø‡§æ:\n';
            highPriorityContacts.forEach(contact => {
                message += `${contact.name} (${contact.phone})\n`;
            });
            alert(message);
            // In a real implementation, this would trigger calls/messages to contacts
        }

        // Contact actions
        function callContact(phone) {
            window.location.href = `tel:${phone}`;
        }

        function deleteContact(id) {
            const confirmMessage = isEnglish ? 'Are you sure you want to delete this contact?' : '‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§µ‡§æ‡§ï‡§à ‡§á‡§∏ ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡•ã ‡§π‡§ü‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?';
            if (confirm(confirmMessage)) {
                contacts = contacts.filter(c => c.id !== id);
                localStorage.setItem('contacts', JSON.stringify(contacts));
                renderContacts();
            }
        }

        // Search functionality
        function searchContacts() {
            const searchTerm = document.getElementById('searchBar').value.toLowerCase();
            const filteredContacts = contacts.filter(contact =>
                contact.name.toLowerCase().includes(searchTerm) ||
                contact.phone.includes(searchTerm) ||
                contact.relation.toLowerCase().includes(searchTerm)
            );
            renderContacts(filteredContacts);
        }

        // Render contacts
        function renderContacts(contactsToRender = contacts) {
            const grid = document.getElementById('contactsGrid');
            grid.innerHTML = '';

            contactsToRender.forEach(contact => {
                const card = document.createElement('div');
                card.className = 'contact-card';
                
                const priorityClass = `priority-${contact.priority}`;
                const priorityText = isEnglish ? 
                    {'high': 'High Priority', 'medium': 'Medium Priority', 'low': 'Low Priority'}[contact.priority] :
                    {'high': '‡§â‡§ö‡•ç‡§ö ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï‡§§‡§æ', 'medium': '‡§Æ‡§ß‡•ç‡§Ø‡§Æ ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï‡§§‡§æ', 'low': '‡§®‡§ø‡§Æ‡•ç‡§® ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï‡§§‡§æ'}[contact.priority];

                card.innerHTML = `
                    <span class="priority-badge ${priorityClass}">${priorityText}</span>
                    <div class="contact-info">
                        <h3>${contact.name}</h3>
                        <div class="contact-detail">üì± ${contact.phone}</div>
                        <div class="contact-detail">üë§ ${contact.relation}</div>
                    </div>
                    <div class="contact-actions">
                        <button class="action-btn call-btn" onclick="callContact('${contact.phone}')">
                            üìû ${isEnglish ? translations.english.call : translations.hindi.call}
                        </button>
                        <button class="action-btn edit-btn" onclick="showEditContactModal(${JSON.stringify(contact)})">
                            ‚úèÔ∏è ${isEnglish ? translations.english.edit : translations.hindi.edit}
                        </button>
                        <button class="action-btn delete-btn" onclick="deleteContact(${contact.id})">
                            üóëÔ∏è ${isEnglish ? translations.english.delete : translations.hindi.delete}
                        </button>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        // Initialize search handler
        document.getElementById('searchBar').addEventListener('input', searchContacts);

        // Initial render
        renderContacts();
    </script>
</body>
</html>